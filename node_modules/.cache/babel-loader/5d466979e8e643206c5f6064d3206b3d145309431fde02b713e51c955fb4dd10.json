{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container my-3\"\n};\nconst _hoisted_2 = {\n  class: \"mb-4\"\n};\nconst _hoisted_3 = {\n  class: \"d-flex justify-content-center gap-3\",\n  style: {\n    \"height\": \"10%\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Header = _resolveComponent(\"Header\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_Header), _createElementVNode(\"div\", _hoisted_1, [_cache[3] || (_cache[3] = _createStaticVNode(\"<div class=\\\"text-center mb-4\\\"><!-- Button trigger modal --><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-bs-toggle=\\\"modal\\\" data-bs-target=\\\"#staticBackdrop\\\"> Launch static backdrop modal </button><!-- Modal --><div class=\\\"modal fade\\\" id=\\\"staticBackdrop\\\" data-bs-backdrop=\\\"static\\\" data-bs-keyboard=\\\"false\\\" tabindex=\\\"-1\\\" aria-labelledby=\\\"staticBackdropLabel\\\" aria-hidden=\\\"true\\\"><div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h5 class=\\\"modal-title\\\" id=\\\"staticBackdropLabel\\\">Modal title</h5><button type=\\\"button\\\" class=\\\"btn-close\\\" data-bs-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"></button></div><div class=\\\"modal-body\\\"> ... </div><div class=\\\"modal-footer\\\"><button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" data-bs-dismiss=\\\"modal\\\">Close</button><button type=\\\"button\\\" class=\\\"btn btn-primary\\\">Understood</button></div></div></div></div><h2 class=\\\"fw-bold\\\">New Order</h2><p class=\\\"fs-5\\\">Benvenuto nella sezione nuovo ordine!</p></div><ul class=\\\"list-unstyled mb-4\\\"><li>• Collega il lettore di barcode al dispositivo tramite Bluetooth.</li><li>• Una volta collegato il lettore, posizionati nella casella di testo sottostante per cominciare a inserire i barcode.</li><li>• Leggi i barcode con il dispositivo collegato (verranno automaticamente inseriti nella casella di testo).</li><li>• Controlla sempre che sia stato inserito il barcode corretto!</li><li>• Una volta terminato l&#39;inserimento dei codici clicca su <strong>&#39;Send&#39;</strong> per inviare il tuo ordine!</li></ul>\", 2)), _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"textarea\", {\n    class: \"form-control\",\n    rows: \"10\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.textContent = $event),\n    placeholder: \"Write here...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.textContent]])]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    id: \"send\",\n    class: \"btn btn-primary px-4 w-25 fs-3\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.sendOrder && $options.sendOrder(...args))\n  }, \"Send\"), _createElementVNode(\"button\", {\n    id: \"reset\",\n    class: \"btn btn-primary px-4 w-25 fs-3 fs-ms-4\",\n    onClick: _cache[2] || (_cache[2] = $event => this.textContent = '')\n  }, \"Reset\")])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_Fragment","_createVNode","_component_Header","_createElementVNode","_hoisted_1","_createStaticVNode","_hoisted_2","rows","_cache","$event","$data","textContent","placeholder","_hoisted_3","id","onClick","args","$options","sendOrder"],"sources":["/home/ilaria/kanbanapp/src/components/Order.vue"],"sourcesContent":["<template>\n    <Header />\n    <div class=\"container my-3\">\n        <div class=\"text-center mb-4\">\n\n        <!-- Button trigger modal -->\n        <button type=\"button\" class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop\">\n  Launch static backdrop modal\n</button>\n\n<!-- Modal -->\n<div class=\"modal fade\" id=\"staticBackdrop\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"modal-body\">\n        ...\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n        <button type=\"button\" class=\"btn btn-primary\">Understood</button>\n      </div>\n    </div>\n  </div>\n</div>\n<script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js\"></script>  \n\n            <h2 class=\"fw-bold\">New Order</h2>\n            <p class=\"fs-5\">Benvenuto nella sezione nuovo ordine!</p>\n        </div>\n        <ul class=\"list-unstyled mb-4\">\n            <li>&bull; Collega il lettore di barcode al dispositivo tramite Bluetooth.</li>\n            <li>&bull; Una volta collegato il lettore, posizionati nella casella di testo sottostante per cominciare a inserire i barcode.</li>\n            <li>&bull; Leggi i barcode con il dispositivo collegato (verranno automaticamente inseriti nella casella di testo).</li>\n            <li>&bull; Controlla sempre che sia stato inserito il barcode corretto!</li>\n            <li>&bull; Una volta terminato l'inserimento dei codici clicca su <strong>'Send'</strong> per inviare il tuo ordine!</li>\n        </ul>\n        <div class=\"mb-4\">\n            <textarea class=\"form-control\" rows=\"10\" v-model=\"textContent\" placeholder=\"Write here...\"></textarea>\n        </div>\n        <div class=\"d-flex justify-content-center gap-3\" style=\"height: 10%;\">\n            <button id=\"send\" class=\"btn btn-primary px-4 w-25 fs-3\" v-on:click=\"sendOrder\">Send</button>\n            <button id=\"reset\" class=\"btn btn-primary px-4 w-25 fs-3 fs-ms-4\" v-on:click=\"this.textContent=''\">Reset</button>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Header from './Header.vue';\nimport axios from 'axios';\nexport default {\n    name: 'Order',\n    data() {\n        return {\n            textContent: '', // Contenuto del file di testo\n            //currentDate: new Date().toLocaleDateString() // Formatta la data\n        };\n    },\n    components: {\n        Header\n    },\n    methods: {\n\n\n\n        async sendOrder() {\n            let token = localStorage.getItem('token').replace(/\"/g, ''); // Rimuovo le virgolette\n\n            // Crea un blob con i dati\n            const blob = new Blob([this.textContent], { type: 'text/plain' });\n\n            // Crea un oggetto File\n            const file = new File([blob], `test.dat`, { type: 'text/plain' }); //Ordine${this.currentDate}\n\n            const formData = new FormData();\n            formData.append('file', file); // Aggiungi il file direttamente\n\n            try {\n                let response = await axios.post(`https://phplaravel-729699-3062059.cloudwaysapps.com/api/v1/uploadOrderFile`, formData, {\n                    headers: {\n                        'authorization': `Bearer ${token}`,\n                        'accept': 'application/json',\n                    },\n                });\n                this.textContent = '';\n                console.log(response);\n                alert(\"Order sent!\");\n\n            } catch (error) {\n                console.error(\"Sending failed, error:\", error);\n                alert(\"Order not sent!\");\n            }\n        }\n    },\n\n    \n    //controllo che l'utente sia loggato, lo faccio tramite l'id salvato e se non è loggato, rimando alla pagina di login\n    mounted() {\n        let userId = localStorage.getItem('id')\n        if (userId == null) {\n            this.$router.push({ name: 'Login' })\n        }\n    }\n}\n\n\n</script>\n"],"mappings":";;EAESA,KAAK,EAAC;AAAgB;;EAuClBA,KAAK,EAAC;AAAM;;EAGZA,KAAK,EAAC,qCAAqC;EAACC,KAAoB,EAApB;IAAA;EAAA;;;;uBA5CzDC,mBAAA,CAAAC,SAAA,SACIC,YAAA,CAAUC,iBAAA,GACVC,mBAAA,CA8CM,OA9CNC,UA8CM,G,0BAhDVC,kBAAA,yiDAyCQF,mBAAA,CAEM,OAFNG,UAEM,G,gBADFH,mBAAA,CAAsG;IAA5FN,KAAK,EAAC,cAAc;IAACU,IAAI,EAAC,IAAI;IA1CpD,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA0C8DC,KAAA,CAAAC,WAAW,GAAAF,MAAA;IAAEG,WAAW,EAAC;iDAAzBF,KAAA,CAAAC,WAAW,E,KAEjER,mBAAA,CAGM,OAHNU,UAGM,GAFFV,mBAAA,CAA6F;IAArFW,EAAE,EAAC,MAAM;IAACjB,KAAK,EAAC,gCAAgC;IAAMkB,OAAK,EAAAP,MAAA,QAAAA,MAAA,UAAAQ,IAAA,KAAEC,QAAA,CAAAC,SAAA,IAAAD,QAAA,CAAAC,SAAA,IAAAF,IAAA,CAAS;KAAE,MAAI,GACpFb,mBAAA,CAAiH;IAAzGW,EAAE,EAAC,OAAO;IAACjB,KAAK,EAAC,wCAAwC;IAAMkB,OAAK,EAAAP,MAAA,QAAAA,MAAA,MAAAC,MAAA,SAAOE,WAAW;KAAK,OAAK,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}